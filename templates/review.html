{% extends "layout.html" %}

{% block title %}
    Review
{% endblock %}}

{% block main %}
  <div class="container-fluid m-3">
    <h1>Book details:</h1>
    <ul class="list-group">
      <li class="list-group-item text-info">Title: {{ book.title }}</li>
      <li class="list-group-item text-info">Author: {{ book.author }}</li>
      <li class="list-group-item text-info">ISBN: {{ book.isbn }}</li>
      <li class="list-group-item text-info">Year: {{ book.year }}</li>
      <li class="list-group-item text-info">Average rating: {{ details.average_rating }}</li>
      <li class="list-group-item text-info">Rating counts: {{ details.work_ratings_count }}</li>
    </ul>
  </div>
  <div class="container-fluid m-3">
    <h3>Review:</h3>
    <ul class="list-group">
      {% for review in reviews%}
        {% if review.review %}
          <li class="list-group-item">
            <p>{{ review.review }}</p>
            <small>Rate: {{ review.rating }}</small>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>

  <form action="{{ url_for('review', isbn=book.isbn) }}" method="post">
    <div class="form-group">
      <label for="review">Give review:</label>
      <textarea name="review" class="form-control" rows="5" id="review"></textarea>
    </div>
    <div class="form-group">
      <h4>Rating:</h4>
      <input type="number" name="rating" min="1" max="5">
    </div>
    <div class="form-group">
      <button class="btn btn-lg btn-primary" type="submit">Submit</button>
    </div>
  </form>
{% endblock %}
